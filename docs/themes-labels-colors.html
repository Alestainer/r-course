<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R for Data Analysis and Visualization</title>
  <meta name="description" content="This is a course on using R focused on data analysis and visualization through case studies.">
  <meta name="generator" content="bookdown 0.4 and GitBook 2.6.7">

  <meta property="og:title" content="R for Data Analysis and Visualization" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a course on using R focused on data analysis and visualization through case studies." />
  <meta name="github-repo" content="jonpage/r-course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R for Data Analysis and Visualization" />
  
  <meta name="twitter:description" content="This is a course on using R focused on data analysis and visualization through case studies." />
  

<meta name="author" content="Jonathan Page">


<meta name="date" content="2017-09-16">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="jitter-rug.html">
<link rel="next" href="polar-ggradar.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #dddddd; }
td.sourceCode { padding-left: 5px; }
code > span.kw { font-weight: bold; } /* Keyword */
code > span.dt { color: #800000; } /* DataType */
code > span.dv { color: #0000ff; } /* DecVal */
code > span.bn { color: #0000ff; } /* BaseN */
code > span.fl { color: #800080; } /* Float */
code > span.ch { color: #ff00ff; } /* Char */
code > span.st { color: #dd0000; } /* String */
code > span.co { color: #808080; font-style: italic; } /* Comment */
code > span.al { color: #00ff00; font-weight: bold; } /* Alert */
code > span.fu { color: #000080; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #ff0000; font-weight: bold; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #ff00ff; } /* SpecialChar */
code > span.vs { color: #dd0000; } /* VerbatimString */
code > span.ss { color: #dd0000; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { } /* ControlFlow */
code > span.op { } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { font-weight: bold; } /* Preprocessor */
code > span.at { } /* Attribute */
code > span.do { color: #808080; font-style: italic; } /* Documentation */
code > span.an { color: #808080; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #808080; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #808080; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Data Analysis and Visualization</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Syllabus</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#office-hours"><i class="fa fa-check"></i>Office Hours</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#student-learning-objectives"><i class="fa fa-check"></i>Student Learning Objectives</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#resources"><i class="fa fa-check"></i>Resources</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#required"><i class="fa fa-check"></i>Required</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#recommended"><i class="fa fa-check"></i>Recommended:</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-requirements"><i class="fa fa-check"></i>Course Requirements</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#weekly-assignments-30"><i class="fa fa-check"></i>Weekly assignments (30%)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#individual-project"><i class="fa fa-check"></i>Individual Project</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#project-assignments-30"><i class="fa fa-check"></i>Project assignments (30%)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#project-proposal-presentation-5"><i class="fa fa-check"></i>Project proposal presentation (5%)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#final-project-20"><i class="fa fa-check"></i>Final project (20%)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#final-project-presentation-participation-15"><i class="fa fa-check"></i>Final project presentation participation (15%)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i>Schedule</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-1"><i class="fa fa-check"></i>Week 1</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-2"><i class="fa fa-check"></i>Week 2</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-3"><i class="fa fa-check"></i>Week 3</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-4"><i class="fa fa-check"></i>Week 4</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-5"><i class="fa fa-check"></i>Week 5</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-6"><i class="fa fa-check"></i>Week 6</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-7"><i class="fa fa-check"></i>Week 7</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-8"><i class="fa fa-check"></i>Week 8</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-9"><i class="fa fa-check"></i>Week 9</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-10"><i class="fa fa-check"></i>Week 10</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-11"><i class="fa fa-check"></i>Week 11</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-12"><i class="fa fa-check"></i>Week 12</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-13"><i class="fa fa-check"></i>Week 13</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-14"><i class="fa fa-check"></i>Week 14</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-15"><i class="fa fa-check"></i>Week 15</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other Resources</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#statistics"><i class="fa fa-check"></i>Statistics</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#visualization"><i class="fa fa-check"></i>Visualization</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#courses"><i class="fa fa-check"></i>Courses</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#books"><i class="fa fa-check"></i>Books</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#papers"><i class="fa fa-check"></i>Papers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="weekly-assignments.html"><a href="weekly-assignments.html"><i class="fa fa-check"></i>Weekly Assignments</a><ul>
<li class="chapter" data-level="" data-path="weekly-assignments.html"><a href="weekly-assignments.html#creating-the-r-markdown-files"><i class="fa fa-check"></i>Creating the R Markdown files</a></li>
<li class="chapter" data-level="" data-path="weekly-assignments.html"><a href="weekly-assignments.html#submitting-your-assignment"><i class="fa fa-check"></i>Submitting your assignment</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="individual-project-1.html"><a href="individual-project-1.html"><i class="fa fa-check"></i>Individual Project</a><ul>
<li class="chapter" data-level="" data-path="individual-project-1.html"><a href="individual-project-1.html#project-assignments"><i class="fa fa-check"></i>Project assignments</a></li>
<li class="chapter" data-level="" data-path="individual-project-1.html"><a href="individual-project-1.html#project-proposal-presentation"><i class="fa fa-check"></i>Project proposal presentation</a></li>
<li class="chapter" data-level="" data-path="individual-project-1.html"><a href="individual-project-1.html#final-project-rmarkdown"><i class="fa fa-check"></i>Final project RMarkdown</a></li>
<li class="chapter" data-level="" data-path="individual-project-1.html"><a href="individual-project-1.html#final-project-presentation-participation"><i class="fa fa-check"></i>Final project presentation participation</a></li>
</ul></li>
<li class="part"><span><b>I R Tutorials</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> R Basics</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#r-markdown"><i class="fa fa-check"></i><b>1.1</b> R Markdown</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#working-with-data-already-loaded-into-r"><i class="fa fa-check"></i><b>1.2</b> Working with data already loaded into R</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#numeric-summaries"><i class="fa fa-check"></i><b>1.2.1</b> Numeric summaries</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#visual-summaries"><i class="fa fa-check"></i><b>1.2.2</b> Visual summaries</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#distribution-plots"><i class="fa fa-check"></i><b>1.2.3</b> Distribution plots</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#assignment"><i class="fa fa-check"></i><b>1.3</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="read-data.html"><a href="read-data.html"><i class="fa fa-check"></i><b>2</b> Reading data</a><ul>
<li class="chapter" data-level="2.1" data-path="read-data.html"><a href="read-data.html#data-source"><i class="fa fa-check"></i><b>2.1</b> Data Source:</a></li>
<li class="chapter" data-level="2.2" data-path="read-data.html"><a href="read-data.html#read_csv"><i class="fa fa-check"></i><b>2.2</b> <code>read_csv</code></a></li>
<li class="chapter" data-level="2.3" data-path="read-data.html"><a href="read-data.html#dplyr"><i class="fa fa-check"></i><b>2.3</b> <code>dplyr</code></a></li>
<li class="chapter" data-level="2.4" data-path="read-data.html"><a href="read-data.html#first-look-at-ggplot2"><i class="fa fa-check"></i><b>2.4</b> First Look at <code>ggplot2</code></a></li>
<li class="chapter" data-level="2.5" data-path="read-data.html"><a href="read-data.html#heatmaps"><i class="fa fa-check"></i><b>2.5</b> Heatmaps</a></li>
<li class="chapter" data-level="2.6" data-path="read-data.html"><a href="read-data.html#hexbins"><i class="fa fa-check"></i><b>2.6</b> Hexbins</a></li>
<li class="chapter" data-level="2.7" data-path="read-data.html"><a href="read-data.html#other-topics-from-this-dataset"><i class="fa fa-check"></i><b>2.7</b> Other topics from this dataset</a></li>
<li class="chapter" data-level="2.8" data-path="read-data.html"><a href="read-data.html#assignment-1"><i class="fa fa-check"></i><b>2.8</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html"><i class="fa fa-check"></i><b>3</b> Facets, Bubbles, and Transparency</a><ul>
<li class="chapter" data-level="3.1" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#data"><i class="fa fa-check"></i><b>3.1</b> Data</a><ul>
<li class="chapter" data-level="3.1.1" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#importing-non-standard-excel-files"><i class="fa fa-check"></i><b>3.1.1</b> Importing non-standard Excel files</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#facets"><i class="fa fa-check"></i><b>3.2</b> Facets</a></li>
<li class="chapter" data-level="3.3" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#bubbles"><i class="fa fa-check"></i><b>3.3</b> Bubbles</a></li>
<li class="chapter" data-level="3.4" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#transparency"><i class="fa fa-check"></i><b>3.4</b> Transparency</a></li>
<li class="chapter" data-level="3.5" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#facets-1"><i class="fa fa-check"></i><b>3.5</b> Facets</a></li>
<li class="chapter" data-level="3.6" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#assignment-2"><i class="fa fa-check"></i><b>3.6</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lines.html"><a href="lines.html"><i class="fa fa-check"></i><b>4</b> Lines and Curves</a><ul>
<li class="chapter" data-level="4.1" data-path="lines.html"><a href="lines.html#data-1"><i class="fa fa-check"></i><b>4.1</b> Data</a></li>
<li class="chapter" data-level="4.2" data-path="lines.html"><a href="lines.html#geom_smooth"><i class="fa fa-check"></i><b>4.2</b> geom_smooth</a></li>
<li class="chapter" data-level="4.3" data-path="lines.html"><a href="lines.html#geom_abline"><i class="fa fa-check"></i><b>4.3</b> geom_abline</a></li>
<li class="chapter" data-level="4.4" data-path="lines.html"><a href="lines.html#geom_vline"><i class="fa fa-check"></i><b>4.4</b> geom_vline</a></li>
<li class="chapter" data-level="4.5" data-path="lines.html"><a href="lines.html#hline"><i class="fa fa-check"></i><b>4.5</b> hline</a></li>
<li class="chapter" data-level="4.6" data-path="lines.html"><a href="lines.html#assignment-3"><i class="fa fa-check"></i><b>4.6</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot-exts.html"><a href="ggplot-exts.html"><i class="fa fa-check"></i><b>5</b> Scatter Plot Matrices and Extensions</a><ul>
<li class="chapter" data-level="5.1" data-path="ggplot-exts.html"><a href="ggplot-exts.html#data-2"><i class="fa fa-check"></i><b>5.1</b> Data</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot-exts.html"><a href="ggplot-exts.html#ggplot2-extensions"><i class="fa fa-check"></i><b>5.2</b> ggplot2 extensions</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot-exts.html"><a href="ggplot-exts.html#ggjoy"><i class="fa fa-check"></i><b>5.3</b> ggjoy</a></li>
<li class="chapter" data-level="5.4" data-path="ggplot-exts.html"><a href="ggplot-exts.html#scatterplot-matrix-ggallyggscatmat"><i class="fa fa-check"></i><b>5.4</b> scatterplot matrix (GGally::ggscatmat)</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot-exts.html"><a href="ggplot-exts.html#assignment-4"><i class="fa fa-check"></i><b>5.5</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html"><i class="fa fa-check"></i><b>6</b> Boxplots and Violin Plots</a><ul>
<li class="chapter" data-level="6.1" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html#data-3"><i class="fa fa-check"></i><b>6.1</b> Data</a></li>
<li class="chapter" data-level="6.2" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html#boxplots"><i class="fa fa-check"></i><b>6.2</b> Boxplots</a></li>
<li class="chapter" data-level="6.3" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html#violin-plots"><i class="fa fa-check"></i><b>6.3</b> Violin Plots</a></li>
<li class="chapter" data-level="6.4" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html#dot-plots"><i class="fa fa-check"></i><b>6.4</b> Dot Plots</a></li>
<li class="chapter" data-level="6.5" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html#assignment-5"><i class="fa fa-check"></i><b>6.5</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="geom-spoke.html"><a href="geom-spoke.html"><i class="fa fa-check"></i><b>7</b> Spatial Visualizations</a><ul>
<li class="chapter" data-level="7.1" data-path="geom-spoke.html"><a href="geom-spoke.html#data-4"><i class="fa fa-check"></i><b>7.1</b> Data</a></li>
<li class="chapter" data-level="7.2" data-path="geom-spoke.html"><a href="geom-spoke.html#geom_spoke"><i class="fa fa-check"></i><b>7.2</b> geom_spoke</a></li>
<li class="chapter" data-level="7.3" data-path="geom-spoke.html"><a href="geom-spoke.html#maps"><i class="fa fa-check"></i><b>7.3</b> maps</a></li>
<li class="chapter" data-level="7.4" data-path="geom-spoke.html"><a href="geom-spoke.html#gganimate"><i class="fa fa-check"></i><b>7.4</b> gganimate</a></li>
<li class="chapter" data-level="7.5" data-path="geom-spoke.html"><a href="geom-spoke.html#glyphs"><i class="fa fa-check"></i><b>7.5</b> glyphs</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html"><i class="fa fa-check"></i><b>8</b> geom_area and geom_ribbon</a><ul>
<li class="chapter" data-level="8.1" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#data-5"><i class="fa fa-check"></i><b>8.1</b> Data</a><ul>
<li class="chapter" data-level="8.1.1" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#downloading-a-file-from-the-internet"><i class="fa fa-check"></i><b>8.1.1</b> Downloading a file from the internet</a></li>
<li class="chapter" data-level="8.1.2" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#pairing-down-the-list-of-variables"><i class="fa fa-check"></i><b>8.1.2</b> Pairing down the list of variables</a></li>
<li class="chapter" data-level="8.1.3" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#adding-more-activity-categories"><i class="fa fa-check"></i><b>8.1.3</b> Adding more activity categories</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#geom_area"><i class="fa fa-check"></i><b>8.2</b> geom_area</a></li>
<li class="chapter" data-level="8.3" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#geom_ribbon"><i class="fa fa-check"></i><b>8.3</b> geom_ribbon</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="jitter-rug.html"><a href="jitter-rug.html"><i class="fa fa-check"></i><b>9</b> Jitter, Rug, and Aesthetics</a><ul>
<li class="chapter" data-level="9.1" data-path="jitter-rug.html"><a href="jitter-rug.html#data-6"><i class="fa fa-check"></i><b>9.1</b> Data</a><ul>
<li class="chapter" data-level="9.1.1" data-path="jitter-rug.html"><a href="jitter-rug.html#codebook"><i class="fa fa-check"></i><b>9.1.1</b> Codebook</a></li>
<li class="chapter" data-level="9.1.2" data-path="jitter-rug.html"><a href="jitter-rug.html#preprocessing-the-spss-file"><i class="fa fa-check"></i><b>9.1.2</b> Preprocessing the SPSS File</a></li>
<li class="chapter" data-level="9.1.3" data-path="jitter-rug.html"><a href="jitter-rug.html#importing-with-the-spss-file-using-memisc"><i class="fa fa-check"></i><b>9.1.3</b> Importing with the SPSS file using memisc</a></li>
<li class="chapter" data-level="9.1.4" data-path="jitter-rug.html"><a href="jitter-rug.html#transform-data"><i class="fa fa-check"></i><b>9.1.4</b> Transform Data</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="jitter-rug.html"><a href="jitter-rug.html#jitter"><i class="fa fa-check"></i><b>9.2</b> Jitter</a></li>
<li class="chapter" data-level="9.3" data-path="jitter-rug.html"><a href="jitter-rug.html#rug"><i class="fa fa-check"></i><b>9.3</b> Rug</a></li>
<li class="chapter" data-level="9.4" data-path="jitter-rug.html"><a href="jitter-rug.html#aesthetics"><i class="fa fa-check"></i><b>9.4</b> Aesthetics</a></li>
<li class="chapter" data-level="9.5" data-path="jitter-rug.html"><a href="jitter-rug.html#assignment-6"><i class="fa fa-check"></i><b>9.5</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html"><i class="fa fa-check"></i><b>10</b> Themes, Labels, and Colors</a><ul>
<li class="chapter" data-level="10.1" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#data-7"><i class="fa fa-check"></i><b>10.1</b> Data</a><ul>
<li class="chapter" data-level="10.1.1" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#zillow-real-estate-data"><i class="fa fa-check"></i><b>10.1.1</b> Zillow Real Estate Data</a></li>
<li class="chapter" data-level="10.1.2" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#reshaping-data-with-tidyr"><i class="fa fa-check"></i><b>10.1.2</b> Reshaping data with <code>tidyr</code></a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#starting-plot"><i class="fa fa-check"></i><b>10.2</b> Starting Plot</a></li>
<li class="chapter" data-level="10.3" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#themes"><i class="fa fa-check"></i><b>10.3</b> Themes</a><ul>
<li class="chapter" data-level="10.3.1" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#complete-themes"><i class="fa fa-check"></i><b>10.3.1</b> Complete Themes</a></li>
<li class="chapter" data-level="10.3.2" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#modifying-a-theme"><i class="fa fa-check"></i><b>10.3.2</b> Modifying a theme</a></li>
<li class="chapter" data-level="10.3.3" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#ggthemes"><i class="fa fa-check"></i><b>10.3.3</b> <code>ggthemes</code></a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#labels"><i class="fa fa-check"></i><b>10.4</b> Labels</a><ul>
<li class="chapter" data-level="10.4.1" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#title"><i class="fa fa-check"></i><b>10.4.1</b> Title</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#colors"><i class="fa fa-check"></i><b>10.5</b> Colors</a><ul>
<li class="chapter" data-level="10.5.1" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#color-scales"><i class="fa fa-check"></i><b>10.5.1</b> Color Scales</a></li>
<li class="chapter" data-level="10.5.2" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#color-brewer"><i class="fa fa-check"></i><b>10.5.2</b> Color Brewer</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#assignment-7"><i class="fa fa-check"></i><b>10.6</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="polar-ggradar.html"><a href="polar-ggradar.html"><i class="fa fa-check"></i><b>11</b> Polar Coordinates and ggradar</a><ul>
<li class="chapter" data-level="11.1" data-path="polar-ggradar.html"><a href="polar-ggradar.html#data-8"><i class="fa fa-check"></i><b>11.1</b> Data</a><ul>
<li class="chapter" data-level="11.1.1" data-path="polar-ggradar.html"><a href="polar-ggradar.html#cps"><i class="fa fa-check"></i><b>11.1.1</b> CPS</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="polar-ggradar.html"><a href="polar-ggradar.html#polar-coordinates"><i class="fa fa-check"></i><b>11.2</b> Polar Coordinates</a></li>
<li class="chapter" data-level="11.3" data-path="polar-ggradar.html"><a href="polar-ggradar.html#ggradar"><i class="fa fa-check"></i><b>11.3</b> ggradar</a></li>
<li class="chapter" data-level="11.4" data-path="polar-ggradar.html"><a href="polar-ggradar.html#assignment-8"><i class="fa fa-check"></i><b>11.4</b> Assignment</a></li>
</ul></li>
<li class="part"><span><b>II Topics</b></span></li>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i>Data Sources Overview</a><ul>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#macro-data"><i class="fa fa-check"></i>Macro Data</a><ul>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#us"><i class="fa fa-check"></i>US</a></li>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#other-us"><i class="fa fa-check"></i>Other US</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#micro-data"><i class="fa fa-check"></i>Micro Data</a></li>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#hawaii-data"><i class="fa fa-check"></i>Hawaii Data</a></li>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#collections-of-data-lists"><i class="fa fa-check"></i>Collections of data lists</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="anscombe.html"><a href="anscombe.html"><i class="fa fa-check"></i>Anscombe’s Quartet</a><ul>
<li class="chapter" data-level="" data-path="anscombe.html"><a href="anscombe.html#prep-the-data"><i class="fa fa-check"></i>Prep the data</a></li>
<li class="chapter" data-level="" data-path="anscombe.html"><a href="anscombe.html#numeric-summary"><i class="fa fa-check"></i>Numeric summary</a></li>
<li class="chapter" data-level="" data-path="anscombe.html"><a href="anscombe.html#visual-summary"><i class="fa fa-check"></i>Visual summary</a></li>
<li class="chapter" data-level="" data-path="anscombe.html"><a href="anscombe.html#the-datasaurus-dozen"><i class="fa fa-check"></i>The Datasaurus Dozen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i>Probability</a><ul>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#hot-hands"><i class="fa fa-check"></i>Hot Hands</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#saving-your-code"><i class="fa fa-check"></i>Saving your code</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#getting-started"><i class="fa fa-check"></i>Getting Started</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#compared-to-what"><i class="fa fa-check"></i>Compared to What?</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#simulations-in-r"><i class="fa fa-check"></i>Simulations in R</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#simulating-the-independent-shooter"><i class="fa fa-check"></i>Simulating the Independent Shooter</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#on-your-own"><i class="fa fa-check"></i>On your own</a><ul>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#comparing-kobe-bryant-to-the-independent-shooter"><i class="fa fa-check"></i>Comparing Kobe Bryant to the Independent Shooter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i>Distributions</a><ul>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#the-data"><i class="fa fa-check"></i>The Data</a></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#the-normal-distribution"><i class="fa fa-check"></i>The normal distribution</a></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#evaluating-the-normal-distribution"><i class="fa fa-check"></i>Evaluating the normal distribution</a></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#normal-probabilities"><i class="fa fa-check"></i>Normal probabilities</a></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#on-your-own-1"><i class="fa fa-check"></i>On Your Own</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="trifecta.html"><a href="trifecta.html"><i class="fa fa-check"></i>How to Judge Visualizations</a></li>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html"><i class="fa fa-check"></i>Intro to Inference</a><ul>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html#the-data-1"><i class="fa fa-check"></i>The data</a></li>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html#the-unknown-sampling-distribution"><i class="fa fa-check"></i>The unknown sampling distribution</a></li>
<li><a href="inference.html#interlude-the-for-loop">Interlude: The <code>for</code> loop</a></li>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html#sample-size-and-the-sampling-distribution"><i class="fa fa-check"></i>Sample size and the sampling distribution</a></li>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html#on-your-own-2"><i class="fa fa-check"></i>On your own</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html"><i class="fa fa-check"></i>Confidence Intervals</a><ul>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html#sampling-from-ames-iowa"><i class="fa fa-check"></i>Sampling from Ames, Iowa</a></li>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html#the-data-2"><i class="fa fa-check"></i>The data</a></li>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html#confidence-intervals"><i class="fa fa-check"></i>Confidence intervals</a></li>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html#confidence-levels"><i class="fa fa-check"></i>Confidence levels</a></li>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html#on-your-own-3"><i class="fa fa-check"></i>On your own</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="inference-numerical.html"><a href="inference-numerical.html"><i class="fa fa-check"></i>Inference for Numerical Data</a><ul>
<li class="chapter" data-level="" data-path="inference-numerical.html"><a href="inference-numerical.html#north-carolina-births"><i class="fa fa-check"></i>North Carolina births</a></li>
<li class="chapter" data-level="" data-path="inference-numerical.html"><a href="inference-numerical.html#exploratory-analysis"><i class="fa fa-check"></i>Exploratory analysis</a></li>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html#inference"><i class="fa fa-check"></i>Inference</a></li>
<li class="chapter" data-level="" data-path="inference-numerical.html"><a href="inference-numerical.html#on-your-own-4"><i class="fa fa-check"></i>On your own</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Analysis and Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="themes-labels-colors" class="section level1">
<h1><span class="header-section-number">Lecture 10</span> Themes, Labels, and Colors</h1>
<p>This lecture uses the following packages:</p>
<pre><code>tidyverse
lubridate
ggthemes
grid
gridExtra</code></pre>
<div id="data-7" class="section level2">
<h2><span class="header-section-number">10.1</span> Data</h2>
<div id="zillow-real-estate-data" class="section level3">
<h3><span class="header-section-number">10.1.1</span> Zillow Real Estate Data</h3>
<p><a href="https://www.zillow.com/">Zillow</a> is an online marketplace for real estate. It facilitates connection between buyers and sellers, and in the process collects a large amount of useful economic statistics.</p>
<p>From <a href="https://www.zillow.com/research/data/#other-metrics">Zillow’s research data page</a>, we will download the <a href="http://files.zillowstatic.com/research/public/Metro/AgeOfInventory_Metro_Public.csv">Age of Inventory (Days)</a> CSV. Their list of data definitions at the bottom of the page includes the following entry:</p>
<p><em>Age of Inventory</em>: Each Wednesday, age of inventory is calculated as the median number of days all active listings as of that Wednesday have been current. These medians are then aggregated into the number reported by taking the median across weekly values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readr)
raw_inventory &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/AgeOfInventory_Metro_Public.csv&quot;</span>)
<span class="kw">head</span>(raw_inventory)[,<span class="dv">1</span>:<span class="dv">6</span>]</code></pre></div>
<pre><code>## # A tibble: 6 x 6
##              RegionName RegionType StateFullName DataTypeDescription
##                   &lt;chr&gt;      &lt;chr&gt;         &lt;chr&gt;               &lt;chr&gt;
## 1         United States    Country          &lt;NA&gt;           All Homes
## 2          New York, NY        Msa      New York           All Homes
## 3           Chicago, IL        Msa      Illinois           All Homes
## 4 Dallas-Fort Worth, TX        Msa         Texas           All Homes
## 5      Philadelphia, PA        Msa  Pennsylvania           All Homes
## 6           Houston, TX        Msa         Texas           All Homes
## # ... with 2 more variables: `2012-01` &lt;int&gt;, `2012-02` &lt;int&gt;</code></pre>
</div>
<div id="reshaping-data-with-tidyr" class="section level3">
<h3><span class="header-section-number">10.1.2</span> Reshaping data with <code>tidyr</code></h3>
<p>Since this data set uses a separate column for each time period, the data is not yet <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html">tidy</a>. Let’s fix that. We’ll use the <code>gather()</code> function from the <code>tidyr</code> package (<a href="http://tidyr.tidyverse.org/reference/gather.html" class="uri">http://tidyr.tidyverse.org/reference/gather.html</a>) to identify the name for the new column that stores the old column names (<code>month</code>), the name for the new column that stores the values in the columns being reshaped (<code>age</code>), and a column selector to identify which columns to reshape (<code>matches()</code> takes a regular expression, see the <code>regex</code> documentation). Lastly, we need to <code>mutate()</code> the <code>month</code> using <code>ymd()</code> from the <code>lubridate</code> package. Into <code>ymd()</code>, we place the original date character (in “YYYY-MM” format) and add a piece for the day (using the “-DD” format), so that each of our month time markers are interpreted as the first day of the corresponding month.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)
if(<span class="st">&quot;package:dplyr&quot;</span> %in%<span class="st"> </span><span class="kw">search</span>()) <span class="kw">detach</span>(<span class="st">&quot;package:dplyr&quot;</span>, <span class="dt">unload=</span><span class="ot">TRUE</span>)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(tidyr)
inventory &lt;-<span class="st"> </span>raw_inventory %&gt;%<span class="st"> </span><span class="kw">select</span>(RegionName, <span class="kw">matches</span>(<span class="st">&quot;[[:digit:]]&quot;</span>)) %&gt;%
<span class="st">  </span><span class="kw">gather</span>(month, age, <span class="kw">matches</span>(<span class="st">&quot;[[:digit:]]&quot;</span>)) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">month =</span> <span class="kw">ymd</span>(<span class="kw">paste0</span>(month, <span class="st">&quot;-01&quot;</span>)))
inventory</code></pre></div>
<pre><code>## # A tibble: 22,713 x 3
##                   RegionName      month   age
##                        &lt;chr&gt;     &lt;date&gt; &lt;int&gt;
##  1             United States 2012-01-01   120
##  2              New York, NY 2012-01-01   136
##  3               Chicago, IL 2012-01-01   141
##  4     Dallas-Fort Worth, TX 2012-01-01   109
##  5          Philadelphia, PA 2012-01-01   132
##  6               Houston, TX 2012-01-01   112
##  7            Washington, DC 2012-01-01   105
##  8 Miami-Fort Lauderdale, FL 2012-01-01    89
##  9               Atlanta, GA 2012-01-01    98
## 10                Boston, MA 2012-01-01   116
## # ... with 22,703 more rows</code></pre>
</div>
</div>
<div id="starting-plot" class="section level2">
<h2><span class="header-section-number">10.2</span> Starting Plot</h2>
<p>Let’s start with a simple line plot of all these series. Let’s show what happens if we leave out the group and color aesthetic.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
inventory %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, age)) +<span class="st"> </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Now, let’s add in the <code>group</code> <code>aes</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">inventory %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, age, <span class="dt">group =</span> RegionName)) +<span class="st"> </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>It’s hard to see what is happening in this tangled mess. Setting <code>alpha</code> to 0.1 will make this easier to untangle.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">basic_plot &lt;-<span class="st"> </span>inventory %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, age, <span class="dt">group =</span> RegionName)) +<span class="st"> </span><span class="kw">geom_line</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>)
basic_plot</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Let’s emphasize the line for Honolulu.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">basic_plot +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> inventory %&gt;%<span class="st"> </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;Honolulu&quot;</span>, RegionName)), <span class="kw">aes</span>(month, age), <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>)</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="themes" class="section level2">
<h2><span class="header-section-number">10.3</span> Themes</h2>
<div id="complete-themes" class="section level3">
<h3><span class="header-section-number">10.3.1</span> Complete Themes</h3>
<p>There are a variety of pre-made themes that can make our figures look cleaner (<a href="http://ggplot2.tidyverse.org/reference/ggtheme.html" class="uri">http://ggplot2.tidyverse.org/reference/ggtheme.html</a>). <code>theme_bw()</code> is good if you don’t want to print all the grey from the default, but you still want the same basic structure.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">basic_plot +<span class="st"> </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p><code>theme_minimal()</code> removes some of the visual clutter, removing the plot border and the axis ticks.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">basic_plot +<span class="st"> </span><span class="kw">theme_minimal</span>()</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p><code>theme_void()</code> goes the whole way and removes everything, but the data. It even removes the axis labels.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">basic_plot +<span class="st"> </span><span class="kw">theme_void</span>()</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
<div id="modifying-a-theme" class="section level3">
<h3><span class="header-section-number">10.3.2</span> Modifying a theme</h3>
<p>To modify a theme, we just add a call to the <code>theme()</code> function and assign new values to the parts of the plot we want to change (see the <code>theme()</code> reference for more examples: <a href="http://ggplot2.tidyverse.org/reference/theme.html" class="uri">http://ggplot2.tidyverse.org/reference/theme.html</a>).</p>
<p>Let’s start with the <code>theme_bw()</code> and make the chart more minimal.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">basic_plot +<span class="st"> </span><span class="kw">theme_bw</span>() +<span class="st"> </span><span class="kw">theme</span>(
  <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),
  <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),
  <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">color =</span> <span class="st">&quot;grey&quot;</span>),
  <span class="dt">axis.ticks =</span> <span class="kw">element_line</span>(<span class="dt">color =</span> <span class="st">&quot;grey&quot;</span>),
  <span class="dt">axis.title.y =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">0</span>)
)</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="ggthemes" class="section level3">
<h3><span class="header-section-number">10.3.3</span> <code>ggthemes</code></h3>
<p>The <code>ggthemes</code> package adds a large set of fun themes. See the vignette at <a href="https://cran.r-project.org/web/packages/ggthemes/vignettes/ggthemes.html" class="uri">https://cran.r-project.org/web/packages/ggthemes/vignettes/ggthemes.html</a> or enter the following command locally after installing the package</p>
<pre><code>install.packages(&quot;ggthemes&quot;)
vignette(&quot;ggthemes&quot;, package = &quot;ggthemes&quot;)</code></pre>
<p>To make our chart look like it came out of the economist, let’s use <code>theme_economist()</code>. To make the line colors work, we’ll use the <code>economist_pal()</code> color pal</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggthemes)
theme_colors &lt;-<span class="st"> </span><span class="kw">economist_pal</span>()(<span class="dv">2</span>)
inventory %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, age, <span class="dt">group =</span> RegionName)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">color =</span> theme_colors[<span class="dv">1</span>], <span class="dt">alpha =</span> <span class="fl">0.1</span>) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> inventory %&gt;%<span class="st"> </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;Honolulu&quot;</span>, RegionName)), 
            <span class="kw">aes</span>(month, age), 
            <span class="dt">color =</span> theme_colors[<span class="dv">2</span>]) +<span class="st"> </span>
<span class="st">  </span><span class="kw">theme_economist</span>()</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Now let’s try out the theme named for <a href="http://fivethirtyeight.com/" class="uri">http://fivethirtyeight.com/</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">theme_colors &lt;-<span class="st"> </span><span class="kw">fivethirtyeight_pal</span>()(<span class="dv">2</span>)
five38 &lt;-<span class="st"> </span>inventory %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, age, <span class="dt">group =</span> RegionName)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">color =</span> theme_colors[<span class="dv">1</span>], <span class="dt">alpha =</span> <span class="fl">0.1</span>) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> inventory %&gt;%<span class="st"> </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;Honolulu&quot;</span>, RegionName)), 
            <span class="kw">aes</span>(month, age), 
            <span class="dt">color =</span> theme_colors[<span class="dv">2</span>]) +<span class="st"> </span>
<span class="st">  </span><span class="kw">theme_fivethirtyeight</span>()
five38</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
</div>
<div id="labels" class="section level2">
<h2><span class="header-section-number">10.4</span> Labels</h2>
<p>Now that we have a nice looking basic chart, we need to make sure our labels are in the right places and give enough information.</p>
<div id="title" class="section level3">
<h3><span class="header-section-number">10.4.1</span> Title</h3>
<p>Let’s start by adding a title. For a time series like this, using the name of the variable on the x-axis is a good start. We can also change the x-axis to break at each year, which makes the seasonality of this series even easier to pick out. With these added vertical lines, our chart will be more readable if we remove the horizontal gridlines (<code>panel.grid.major.y</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">five38_with_title &lt;-<span class="st"> </span>five38 +<span class="st"> </span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Median Days Listed by Metro Area&quot;</span>) +<span class="st"> </span>
<span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks =</span> <span class="st">&quot;1 year&quot;</span>, <span class="dt">date_labels =</span> <span class="st">&quot;%Y&quot;</span>) +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.major.y =</span> <span class="kw">element_blank</span>())
five38_with_title</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Since we used our title wisely we don’t need to add a y-axis title. The x-axis is time and this is fairly obvious, so we can also leave off the x-axis title. What we should do is label the highlighted series.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">last_hnl &lt;-<span class="st"> </span>inventory %&gt;%
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;Honolulu&quot;</span>, RegionName)) %&gt;%
<span class="st">  </span><span class="kw">top_n</span>(<span class="dv">1</span>, month)
gg &lt;-<span class="st"> </span>five38_with_title +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">data =</span> last_hnl, <span class="dt">label =</span> last_hnl$RegionName,
            <span class="dt">hjust =</span> <span class="st">&quot;left&quot;</span>, <span class="dt">nudge_x =</span> <span class="dv">70</span>)
gg</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>To adjust the margins, we have to drill deeper than ggplot. I found the following approach through searching for <code>ggplot clipping</code> (<a href="https://rud.is/b/2015/08/27/coloring-and-drawing-outside-the-lines-in-ggplot/" class="uri">https://rud.is/b/2015/08/27/coloring-and-drawing-outside-the-lines-in-ggplot/</a>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gridExtra)
<span class="kw">library</span>(grid)
gb &lt;-<span class="st"> </span><span class="kw">ggplot_build</span>(gg +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">plot.margin =</span> <span class="kw">unit</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">1</span>), <span class="st">&quot;lines&quot;</span>)))
gt &lt;-<span class="st"> </span><span class="kw">ggplot_gtable</span>(gb)

gt$layout$clip[gt$layout$name==<span class="st">&quot;panel&quot;</span>] &lt;-<span class="st"> &quot;off&quot;</span>

<span class="kw">grid.draw</span>(gt)</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
</div>
</div>
<div id="colors" class="section level2">
<h2><span class="header-section-number">10.5</span> Colors</h2>
<p>Color is an important tool in creating engaging and informative visualizations. Color is often used to encode a dimension not already displayed in a chart (e.g., adding a third dimension to a scatter plot). Above, we used color to highlight a specific set of data points. We used a highlight color for Urban Honolulu and set the other metro areas to a blue with transparency.</p>
<div id="color-scales" class="section level3">
<h3><span class="header-section-number">10.5.1</span> Color Scales</h3>
<p>An easy way to see the colors within a given color scheme is by using the <code>show_col()</code> function in the <code>scales</code> package. We can use it to show the colors in the <code>theme_colors</code> variable we created above.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(scales)
<span class="kw">show_col</span>(theme_colors)</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>The combinations of letters and numbers in the color squares is the hex representation of the red, green, and blue color values that make up the given color (e.g., <code>#008FD5</code>). Adobe has a fun color chooser where you can paste these hex values and create your own color scheme:</p>
<p><a href="https://color.adobe.com/" class="uri">https://color.adobe.com/</a></p>
<p>There are not many colors in the <code>fivethirtyeight_pal()</code> color palette (only 3). The <code>economist_pal()</code> palette has 11, which is a bit better for categorical data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">show_col</span>(<span class="kw">economist_pal</span>()(<span class="dv">11</span>))</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
<div id="color-brewer" class="section level3">
<h3><span class="header-section-number">10.5.2</span> Color Brewer</h3>
<p>Color Brewer (<a href="http://colorbrewer2.org/" class="uri">http://colorbrewer2.org/</a>) is the gold standard for color choice in maps. The online tool allows you to preview and export color schemes that are designed for accessibility (i.e., color-blind safe) and for the main strategies for encoding data using color (sequential, diverging, and qualitative). Most of these scales are available within ggplot (<a href="http://ggplot2.tidyverse.org/reference/scale_brewer.html" class="uri">http://ggplot2.tidyverse.org/reference/scale_brewer.html</a>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">RColorBrewer::brewer.pal.info</code></pre></div>
<pre><code>##          maxcolors category colorblind
## BrBG            11      div       TRUE
## PiYG            11      div       TRUE
## PRGn            11      div       TRUE
## PuOr            11      div       TRUE
## RdBu            11      div       TRUE
## RdGy            11      div      FALSE
## RdYlBu          11      div       TRUE
## RdYlGn          11      div      FALSE
## Spectral        11      div      FALSE
## Accent           8     qual      FALSE
## Dark2            8     qual       TRUE
## Paired          12     qual       TRUE
## Pastel1          9     qual      FALSE
## Pastel2          8     qual      FALSE
## Set1             9     qual      FALSE
## Set2             8     qual       TRUE
## Set3            12     qual      FALSE
## Blues            9      seq       TRUE
## BuGn             9      seq       TRUE
## BuPu             9      seq       TRUE
## GnBu             9      seq       TRUE
## Greens           9      seq       TRUE
## Greys            9      seq       TRUE
## Oranges          9      seq       TRUE
## OrRd             9      seq       TRUE
## PuBu             9      seq       TRUE
## PuBuGn           9      seq       TRUE
## PuRd             9      seq       TRUE
## Purples          9      seq       TRUE
## RdPu             9      seq       TRUE
## Reds             9      seq       TRUE
## YlGn             9      seq       TRUE
## YlGnBu           9      seq       TRUE
## YlOrBr           9      seq       TRUE
## YlOrRd           9      seq       TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">show_col</span>(<span class="kw">brewer_pal</span>(<span class="dt">palette =</span> <span class="st">&quot;Accent&quot;</span>)(<span class="dv">8</span>))</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>Here’s how to take this color palette and apply it to our previous chart:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">theme_colors &lt;-<span class="st"> </span><span class="kw">brewer_pal</span>(<span class="dt">palette =</span> <span class="st">&quot;Accent&quot;</span>)(<span class="dv">8</span>)
inventory %&gt;%<span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(month, age, <span class="dt">group =</span> RegionName)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">color =</span> theme_colors[<span class="dv">1</span>], <span class="dt">alpha =</span> <span class="fl">0.1</span>) +
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> inventory %&gt;%<span class="st"> </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;Honolulu&quot;</span>, RegionName)), 
            <span class="kw">aes</span>(month, age), 
            <span class="dt">color =</span> theme_colors[<span class="dv">2</span>]) +<span class="st"> </span>
<span class="st">  </span><span class="kw">theme_fivethirtyeight</span>()</code></pre></div>
<p><img src="10-themes-labels-colors_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
</div>
</div>
<div id="assignment-7" class="section level2">
<h2><span class="header-section-number">10.6</span> Assignment</h2>
<p>Using the same file, pick a different time series to emphasize (with a different color) and choose a different theme.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="jitter-rug.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="polar-ggradar.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jonpage/r-course/edit/master/10-themes-labels-colors.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
